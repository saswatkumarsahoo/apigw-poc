{
	"AWSTemplateFormatVersion": "2010-09-09",
	"Description": "Customers API - Automation PoC",
	"Parameters": {
		"SwaggerBucketName": {
			"Type": "String",
			"Description": "Swagger location inside S3 bucket",
			"Default": "alexa-trial-es"
		},
		"SwaggerPath": {
			"Type": "String",
			"Default": "swagger/Customers-prd-swagger-apigateway.json",
			
		},
		"SwaggerVersionId": {
			"Type": "String",
			"Description": "Version Id of swagger file",
			"Default": "W6lMQ5R8tTbVjBY.kx_S65OU8MkiPLzq"
		},
		"ApiName": {
			"Type": "String",
			"Description": "Rest API name"
		},
		"StageName": {
			"Type": "String",
			"Description": "Rest API stage name"
		},
		"DeploymentDescription": {
			"Type": "String",
			"Description": "Rest API stage name"
		}
	},
	"Resources": {
		"RestApi": {
			"Type": "AWS::ApiGateway::RestApi",
			"Properties": {
				"BodyS3Location": {
					"Bucket": {
						"Ref": "SwaggerBucketName"
					},
					"Version": {
						"Ref": "SwaggerVersionId"
					},
					"Key": {
						"Ref": "SwaggerPath"
					}
				},
				"Name": {
					"Ref": "ApiName"
				},
				"Parameters": {
					"endpointConfigurationTypes": "REGIONAL"
				}
			}
		},
		"Stage": {
			"Type": "AWS::ApiGateway::Deployment",
			"Properties": {
				"RestApiId": {
					"Ref": "RestApi"
				},
				"Description": {"Ref":"DeploymentDescription"},
				"StageName": {
					"Ref": "StageName"
				}
			},
			"DependsOn": [
				"RestApi"
			]
		}
	}

}